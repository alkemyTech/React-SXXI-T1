"use strict";(self.webpackChunkong_client=self.webpackChunkong_client||[]).push([[979],{1828:function(e,n,r){r.d(n,{i:function(){return o}});var t=r(1078),a={linkClass:"btn w-100",color:"default",background:"default",homeText:"Ir a Inicio",dashboardText:"Ir a Dashboard",icon:r(812).VT},i=r(184),o=function(e){var n=e.wrapLink,r=void 0===n?"":n,o=e.text,c=void 0===o?"Volver":o,s=e.to,u=e.color,l=void 0===u?void 0:u,d=e.background,m=void 0===d?void 0:d,p=e.icon,f=void 0===p?void 0:p;return(0,i.jsx)(t.C,{wrapLink:"col col-7 col-sm-4 col-md-3 "+r,linkClass:a.linkClass,color:l||a.color,background:m||a.background,text:c,icon:f||a.icon,to:s})}},5866:function(e,n,r){r.d(n,{t:function(){return F}});var t,a,i,o,c,s,u=r(812),l=r(2156),d=r(4216),m=r(2791),p=r(8015),f=r(885),g=function(e,n,r){var t=function(){var e=(0,m.useState)(void 0),n=(0,f.Z)(e,2),r=n[0],t=n[1];return{image:r,convertBase64:function(e){var n=new FileReader;n.onloadend=function(){t(n.result.toString())},n.readAsDataURL(e)},handleResetImage:function(){return t(void 0)}}}(),a=t.image,i=t.convertBase64,o=t.handleResetImage,c=(0,m.useRef)();return(0,m.useEffect)((function(){n(a||void 0)}),[a]),{image:a,handleChangeFile:function(n){var t=n.target.files[0];if(n&&t){var a=p.zb.includes(t.type),c=t.size<=p.aF;a&&c?i(t):o(),e(r,t)}else e(r,void 0)},refInputFile:c,handleInputFile:function(){c.current.click()}}},h=r(168),x=r(6444),v=r(7852),b=x.ZP.div(t||(t=(0,h.Z)(["\n  border: 2px dashed ",";\n  border-radius: 8px;\n  background-color: rgba(0, 0, 0, 0.15);\n  width: 250px;\n  height: 250px;\n  cursor: pointer;\n"])),v.l.grayBorder),C=x.ZP.input(a||(a=(0,h.Z)(["\n  position: absolute;\n  opacity: 0;\n  filter: alpha(opacity=0);\n  margin: 0;\n  padding: 0;\n  bottom: 6px;\n  z-index: -1;\n"]))),Z=x.ZP.div(i||(i=(0,h.Z)(['\n  width: 250px;\n  height: 250px;\n  position: relative;\n  overflow: hidden;\n  cursor: pointer;\n  border-radius: 8px;\n\n  &:before {\n    content: "";\n    width: inherit;\n    height: inherit;\n    position: absolute;\n    background: #000;\n    opacity: 0;\n    transition: opacity 0.3s linear;\n  }\n\n  &:hover:before {\n    opacity: 0.75;\n  }\n\n  &:hover {\n    .WrapAddImageHover {\n      top: 35%;\n    }\n  }\n']))),y=x.ZP.div(o||(o=(0,h.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: inherit;\n  color: #fff;\n  text-align: center;\n  position: absolute;\n  top: 100%;\n  transition: top 0.3s linear;\n"]))),j=x.ZP.div(c||(c=(0,h.Z)(["\n  display: flex;\n  justify-content: end;\n  align-items: center;\n  height: 70px;\n  min-height: 79px;\n  width: 73px;\n"]))),w=(0,x.ZP)(l.tt)(s||(s=(0,h.Z)(["\n  padding: 0 22px 0 10px;\n  border-radius: 8px;\n  backdrop-filter: blur(10px);\n  color: ","!important;\n"])),v.l.white),k=r(184),F=function(e){var n=e.wrapAllFormImageField,r=void 0===n?"py-3 d-flex flex-column align-items-center justify-content-center ":n,t=e.BoxInputFileClass,a=void 0===t?"col col-12 d-flex justify-content-center align-items-center":t,i=e.errors,o=e.touched,c=e.name,s=e.setFieldValue,m=e.setImageToSend,f=e.heightCustomImage,h=void 0===f?"246px":f,x=e.backgroundSize,v=void 0===x?"cover":x,F=e.imageIsEdit,I=g(s,m,c),S=I.image,B=I.handleChangeFile,E=I.refInputFile,T=I.handleInputFile,N=S||F?(0,k.jsx)(l.dK,{image:S||F,height:S||F?h:"0",backgroundSize:S||F?v:"0",borderRadius:"8px"}):u.hu;return(0,k.jsxs)("div",{className:r,children:[(0,k.jsxs)(Z,{className:"img-container",onClick:T,children:[(0,k.jsx)(b,{className:a,children:N}),(0,k.jsxs)(y,{className:"WrapAddImageHover",children:[(0,k.jsx)(j,{className:"pe-2",children:u.ny}),(0,k.jsx)(w,{className:"download",children:p.el.downloadImage})]})]}),(0,k.jsx)(d.v,{errors:i,touched:o,name:c}),(0,k.jsx)(C,{ref:E,type:"file",name:c,onChange:function(e){return B(e)}})]})}},8015:function(e,n,r){r.d(n,{aF:function(){return t},el:function(){return i},zb:function(){return a}});var t=204800,a=["image/jpg","image/jpeg","image/png"],i={downloadImage:"Cargar Imagen"}},9053:function(e,n,r){r.d(n,{X:function(){return o}});var t=r(5866),a=r(4315),i=r(184),o=function(e){var n=e.formik,r=n.errors,o=n.touched,c=n.setFieldValue,s=e.schemas.name,u=e.setImageToSend,l=e.imageIsEdit,d=e.loading,m=e.wrapInputClass,p=e.wrapAllFormImageField;return(0,i.jsx)(i.Fragment,{children:d?(0,i.jsx)(a.g,{placeClass:"placeClass col col-12 d-flex justify-content-center w-100 h-100",spanClass:"spanClass h-100 w-50",height:"250px"}):(0,i.jsx)(t.t,{errors:r,touched:o,name:s,setFieldValue:c,setImageToSend:u,imageIsEdit:l.image,wrapInputClass:m,wrapAllFormImageField:p})})}},4216:function(e,n,r){r.d(n,{v:function(){return d}});var t,a=r(168),i=r(6444),o=r(362),c=r(2156),s=r(7852),u=i.ZP.span(t||(t=(0,a.Z)(["\n  ",";\n  color: ","!important;\n\n  ","\n"])),c.ZZ,s.l.red,o.J),l=r(184),d=function(e){var n=e.errors,r=e.touched,t=e.name;return(0,l.jsx)(l.Fragment,{children:n&&n[t]&&r[t]&&(0,l.jsx)(u,{className:"CustomFormError mt-1",children:n[t]})})}},1823:function(e,n,r){r.d(n,{d:function(){return s}});var t=r(4165),a=r(5861),i=r(1830),o=r.n(i),c=function(e){return o().fire({title:e||"Confirmar acci\xf3n",showCancelButton:!0,cancelButtonColor:"#FF0000",cancelButtonText:"Cancelar",confirmButtonText:"Confirmar",confirmButtonColor:"#0038FF",icon:"question"}).then((function(e){if(e.isConfirmed)return!0}))},s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},1545:function(e,n,r){r.d(n,{p:function(){return o}});var t=r(4165),a=r(5861),i=r(3312),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.blob();case 6:return a=e.sent,e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){var r=n.result;e(r)},n.readAsDataURL(a)})));case 10:return e.prev=10,e.t0=e.catch(0),console.error("error convertUrlToBase64",e.t0.message),e.abrupt("return",{success:!1,message:"".concat(i.x.dontConvertURLtoase64," \n    ").concat(i.x.tryLater)});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()},8979:function(e,n,r){r.r(n),r.d(n,{default:function(){return H}});var t,a,i,o,c,s=r(2791),u=r(5630),l=r(7551),d=r(2443),m=r.n(d),p=r(168),f=r(6444),g=r(1070),h=(0,f.ZP)(u.Z)(t||(t=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n"]))),x=(0,f.ZP)(g.M)(a||(a=(0,p.Z)(["\n  border: 1px solid #bdbdbd;\n"]))),v=f.ZP.div(i||(i=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n"]))),b=f.ZP.span(o||(o=(0,p.Z)(["\n  color: red !important;\n  font-size: 15px;\n  padding-left: 10px;\n"]))),C=(f.ZP.img(c||(c=(0,p.Z)(["\n  height: 100px;\n  width: 150px;\n  border-radius: 0.3rem;\n  margin-top: 0.4rem;\n"]))),r(4165)),Z=r(5861),y=r(885),j=r(4008),w=r(2580),k=r(1823),F=r(5271),I=r(1724),S=["image/png","image/jpg","image/jpeg"],B=I.Ry().shape({name:I.Z_().matches(/[a-z, A-Z]/,"Debe ser un nombre valido").min(4,"El nombre debe contener almenos 4 caracteres").required("Campo obligatorio"),image:I.nK().test("fileFormat","Solo formato .jpg y .png",(function(e){return"string"===typeof e||e&&S.includes(e.type)})).required("Campo obligatorio"),description:I.Z_().required("Campo obligatorio")}),E=r(5705),T=r(7689),N=r(1545),A=r(822),P=r(4887),R=r(1828),L=r(9053),V=r(644),z=r(184),H=function(){var e=function(){var e=(0,T.UO)().id,n=(0,T.s0)(),r=(0,s.useState)(!1),t=(0,y.Z)(r,2),a=t[0],i=t[1],o=e?"Editar":"Confirmar",c=(0,s.useState)({name:"",image:"",description:""}),u=(0,y.Z)(c,2),l=u[0],d=u[1],m=(0,s.useState)(""),p=(0,y.Z)(m,2),f=p[0],g=p[1],h=function(e){(0,k.d)("\xbfEstas Segura/o que deseas crear la categor\xeda?").then((function(r){r?j.Z.post(w.S.category,e).then((function(e){e.success?(0,F.w)("center","success","Categor\xeda Creada").then((function(){V("name",""),V("image",""),V("description",""),g(""),n("/backoffice/categories")})):(0,F.w)("center","error","Ha ocurrido un error")})).catch((function(){return(0,F.w)("center","error","Ha ocurrido un error")})).finally((function(){return i(!1)})):i(!1)}))},x=function(e,r){(0,k.d)("\xbfEstas Segura/o que deseas editar la categor\xeda?").then((function(t){t?j.Z.put(w.S.category,e,r).then((function(e){e.success?(0,F.w)("center","success","Categor\xeda Actualizada").then((function(){V("name",""),V("image",""),V("description",""),g(""),n("/backoffice/categories")})):(0,F.w)("center","error","Ha ocurrido un error")})).catch((function(){return(0,F.w)("center","error","Ha ocurrido un error")})).finally((function(){return i(!1)})):i(!1)}))},v=function(){var n=(0,Z.Z)((0,C.Z)().mark((function n(){var r,t,a;return(0,C.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=A.name,t=A.description,n.t0=r,n.t1=t,!f){n.next=7;break}n.t2=f,n.next=10;break;case 7:return n.next=9,(0,N.p)(l.image);case 9:n.t2=n.sent;case 10:n.t3=n.t2,a={name:n.t0,description:n.t1,image:n.t3},i(!0),e?x(e,a):h(a);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),b=(0,E.TA)({initialValues:{name:"",image:"",description:""},onSubmit:v,validationSchema:B}),I=b.handleChange,S=b.handleSubmit,A=b.values,P=b.errors,R=b.handleBlur,L=b.touched,V=b.setFieldValue;return{handleChange:I,handleSubmit:S,values:A,errors:P,handleBlur:R,touched:L,setFieldValue:V,imageB64:f,setImageB64:g,id:e,category:l,setCategory:d,schema:{name:"image"},loading:a,formik:b,buttonText:o}}(),n=e.id,r=e.handleChange,t=e.handleBlur,a=e.handleSubmit,i=e.schema,o=e.formik,c=e.category,d=e.setImageB64,p=e.setFieldValue,f=e.values,g=e.errors,I=e.touched,S=e.setCategory,H=e.loading,q=e.buttonText;return(0,s.useEffect)((function(){n&&j.Z.get("".concat(w.S.category,"/").concat(n)).then((function(e){if(e.success){var n=e.data;p("name",n.name),p("image",n.image),p("description",n.description),S({name:n.name,image:n.image,description:n.description})}else(0,F.w)("center","error","Ha ocurrido un error")})).catch((function(){return(0,F.w)("center","error","Ha ocurrido un error")}))}),[n,p,S]),(0,z.jsxs)("div",{className:"container my-5",children:[(0,z.jsx)("div",{children:(0,z.jsx)(A.c,{title:n?"Editar Categor\xeda":"Crear Categor\xeda",justify:"center",wrapTextClass:"text-center",wrapTitleClass:"d-block h-auto"})}),(0,z.jsx)("div",{className:"my-5",children:(0,z.jsx)(R.i,{wrapLink:"my-4",to:"/"+V.x.BACKOFFICE+V.x.CATEGORIES})}),(0,z.jsxs)(h,{className:"my-5 col-sm-10 col-lg-6 mx-auto",onSubmit:a,children:[(0,z.jsx)(u.Z.Group,{className:"mb-3",children:(0,z.jsxs)(v,{children:[(0,z.jsx)(u.Z.Label,{children:"Nombre de la categor\xeda:"}),(0,z.jsx)(x,{type:"text",name:"name",placeholder:"Nombre",onBlur:t,value:f.name,onChange:r}),g.name&&I.name&&(0,z.jsx)(b,{children:g.name})]})}),(0,z.jsx)(u.Z.Group,{children:(0,z.jsxs)(v,{children:[(0,z.jsx)(u.Z.Label,{children:"Agrega una descripci\xf3n:"}),(0,z.jsx)(l.CKEditor,{name:"description",data:f.description,editor:m(),config:{placeholder:"Descripci\xf3n"},onChange:function(e,n){p("description",n.getData())}}),g.description&&(0,z.jsx)(b,{children:g.description})]})}),(0,z.jsx)(u.Z.Group,{children:(0,z.jsx)(L.X,{formik:o,schemas:i,setImageToSend:d,setFieldValue:p,imageIsEdit:c})}),(0,z.jsx)("div",{className:"my-2 d-flex justify-content-center",children:(0,z.jsx)(P.o,{buttonClass:"col-7 col-lg-8 py-2 px-3 mx-auto",text:H?"Loading..":q,color:n?"yellow":"success",background:n?"yellow":"success",type:"submit",disabled:H})})]})]})}}}]);
//# sourceMappingURL=979.22334720.chunk.js.map